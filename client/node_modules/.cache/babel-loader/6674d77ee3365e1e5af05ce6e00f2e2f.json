{"ast":null,"code":"var _jsxFileName = \"/home/giorgir/Desktop/web projects/discord-mern/client/src/components/Chat/Chat.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, useReducer } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport FormData from 'form-data';\nimport './_chat.sass';\nimport { EditSVG, MicSVGOff, MicSVGOn, CamSVGOff, CamSVGOn, ScreenShareOff, ScreenShareOn } from '../../styles/SVGs/_SVGs';\nimport { appendFile } from './_appendFile';\nimport { getBasicData } from '../js/_getBasicData';\nimport * as socks from '../js/_socketSide'; // import { WebRTCFrame } from '../WebRTCInteractive/WebRTCInteractive';\n\nimport { VoiceFrame } from '../Voice/_voice';\nimport { PopupEditCat, PopupAddCat } from './_editCat';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst checkRoomId = (roomId, setCategory, history, setVoiceMode) => {\n  if (roomId === undefined) history.push(\"/chat/61ed960432479c682956802b\"); // roomId = \"61ed960432479c682956802b\";\n\n  axios.post(\"/api/roomId\", {\n    id: roomId\n  }).then(res => {\n    if (res.data.roomName != \"try_again\") {\n      setCategory(res.data.roomName);\n      if (res.data.voiceMode) setVoiceMode(true);\n    } else {\n      history.push(\"/chat/61ed960432479c682956802b\"); // roomId = \"61ed960432479c682956802b\";\n\n      setCategory(\"room 1\");\n      setVoiceMode(false);\n    }\n  }).catch(err => console.error(err));\n};\n\nconst logOut = (e, history) => {\n  e.preventDefault();\n  axios.post(\"/api/users/logout\", {\n    junk: \"\"\n  }).then(res => {\n    if (res.data.status === \"done\") history.push(\"/\");\n  }).catch(err => console.error(err));\n  socks.disconnect();\n};\n\nconst newMessage = (user, msg, date) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"element\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"author\",\n    children: user\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"message\",\n    children: msg.split(\"\\n\").map(line => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: line\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 42\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"date\",\n    children: date\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 54,\n  columnNumber: 5\n}, this);\n\nconst CategoriesJSX = _ref => {\n  let {\n    cats,\n    display,\n    setDisplay,\n    setElementId\n  } = _ref;\n  return cats.map(cat => /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"category\",\n    id: cat._id,\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: `/chat/${cat._id}`,\n      children: [\"# \", cat.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(EditSVG, {\n      id: cat._id,\n      display: display,\n      setDisplay: setDisplay,\n      setElementId: setElementId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 21\n  }, this));\n};\n\n_c = CategoriesJSX;\n\nconst Chat = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const Categories = () =>\n  /*#__PURE__*/\n  // { user, cats, displayEdit, setDisplayEdit, displayAdd, setDisplayAdd, setElementId}\n  _jsxDEV(\"div\", {\n    className: \"categories\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"topbar\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"user\",\n          children: userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"plus\",\n          onClick: () => setDisplayAdd(!displayAdd),\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          id: \"ul-id\",\n          children: /*#__PURE__*/_jsxDEV(CategoriesJSX, {\n            cats: catjson,\n            display: displayEdit,\n            setDisplay: setDisplayEdit,\n            setElementId: setElementId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n\n  const Messages = () => {\n    _s();\n\n    // { authentication, room, roomId, elements, user }\n    const sendFile = () => {\n      // sendFile(e.target.files[0])\n      let file = selectedFile;\n      console.log(\"shit\", file); // const formData = new FormData();\n      // formData.append(\"user\", userName);\n      // // formData.append(\"time\", \"00:00\");\n      // formData.append(\"size\", file.size); // in bites\n      // // let fileF = \"\";\n      // formData.append(\"file\", selectedFile, file.name);\n      // axios.post(\"/upload\", formData)\n      //      .then(res => {\n      //         console.log(\"Successfully Uploaded...\");\n      //      })\n      //      .catch(err => alert(err));\n    };\n\n    const [selectedFile, setSelectedFile] = useState(null);\n    useEffect(() => {\n      if (selectedFile != null) sendFile();\n    }, [selectedFile]);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"chat-screen\",\n        children: [elements.map(el => newMessage(el.user, el.msg, el.date)), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"last-element\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"input\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"text-area\",\n          type: \"text\",\n          placeholder: `Message #${category}`,\n          onKeyPress: e => socks.sendMessage(e, userName, category, roomId, authentication)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          value: selectedFile,\n          onChange: e => setSelectedFile(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  };\n\n  _s(Messages, \"Wvj+gpJAJfE3yy+sFlZ4YM6XMAM=\");\n\n  const Center = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"messages\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"top\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        id: \"category\",\n        children: [\"# \", category]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        id: \"log_out\",\n        onClick: event => {\n          logOut(event, history);\n        },\n        children: \"Log out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this), voiceMode ? /*#__PURE__*/_jsxDEV(VoiceFrame, {\n      history: history,\n      roomId: roomId,\n      userName: userName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(Messages, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 9\n  }, this);\n\n  const StatusBar = () =>\n  /*#__PURE__*/\n  // { online, offline }\n  _jsxDEV(\"div\", {\n    className: \"status-bar\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"ACTIVE - \", onlineList.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this), onlineList.map(el => /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"online\",\n      children: [\"--- \", el]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 35\n    }, this)), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"OFFLINE - \", offlineList.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), offlineList.map(el => /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"offline\",\n      children: [\"--- \", el]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 36\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 9\n  }, this);\n\n  const reducer = (state, action) => {// pass\n  };\n\n  const initialState = {\n    setOnline: \"\",\n    setOffline: \"\",\n    onlineList: [],\n    offlineList: []\n  };\n  const [online, setOnline] = useState(\"\");\n  const [offline, setOffline] = useState(\"\");\n  const [onlineList, setOnlineList] = useState([]);\n  const [offlineList, setOfflineList] = useState([]); // const [state, dispatch] = useReducer(reducer, initialState);\n\n  let {\n    roomId\n  } = useParams();\n  const [userName, setUserName] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [catjson, setCatJson] = useState([]);\n  const [authentication, setAuthentication] = useState();\n  const [element, setElement] = useState({\n    user: \"author\",\n    msg: \"message\",\n    date: \"date\"\n  });\n  const [elements, setElements] = useState([]);\n  const [displayEdit, setDisplayEdit] = useState(false);\n  const [displayAdd, setDisplayAdd] = useState(false);\n  const [elementId, setElementId] = useState();\n  const [voiceMode, setVoiceMode] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    checkRoomId(roomId, setCategory, history, setVoiceMode);\n    getBasicData(history, setUserName, setAuthentication, setCatJson, \"chat\");\n  }, []);\n  useEffect(() => {\n    if (userName !== \"\") socks.main(category, userName, setElement, setOnline, setOffline);\n  }, [userName]);\n  useEffect(() => {\n    setElements([...elements, element]);\n  }, [element]);\n  useEffect(() => {\n    let el = document.getElementById(\"last-element\");\n    el.scrollIntoView();\n  }, [elements]);\n  useEffect(() => {\n    if (online !== \"\") {\n      let new_offlineList = offlineList.filter(element => element !== online);\n      setOfflineList(new_offlineList);\n      setOnlineList([...onlineList, online]);\n    }\n  }, [online]);\n  useEffect(() => {\n    if (offline !== \"\") {\n      let new_onlineList = onlineList.filter(element => element !== offline);\n      setOnlineList(new_onlineList);\n      setOfflineList([...offlineList, offline]);\n    }\n  }, [offline]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat\",\n    children: [displayEdit ? /*#__PURE__*/_jsxDEV(PopupEditCat, {\n      setDisplay: setDisplayEdit,\n      catjson: catjson,\n      setCatJson: setCatJson,\n      elementId: elementId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }, this) : null, displayAdd ? /*#__PURE__*/_jsxDEV(PopupAddCat, {\n      setDisplay: setDisplayAdd,\n      catjson: catjson,\n      setCatJson: setCatJson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }, this) : null, /*#__PURE__*/_jsxDEV(Categories, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Center, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StatusBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(Chat, \"GpDJEduiYaSpDd8GYUSWcRQlShs=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c2 = Chat;\nexport default Chat;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CategoriesJSX\");\n$RefreshReg$(_c2, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useReducer","useParams","useHistory","axios","FormData","EditSVG","MicSVGOff","MicSVGOn","CamSVGOff","CamSVGOn","ScreenShareOff","ScreenShareOn","appendFile","getBasicData","socks","VoiceFrame","PopupEditCat","PopupAddCat","checkRoomId","roomId","setCategory","history","setVoiceMode","undefined","push","post","id","then","res","data","roomName","voiceMode","catch","err","console","error","logOut","e","preventDefault","junk","status","disconnect","newMessage","user","msg","date","split","map","line","CategoriesJSX","cats","display","setDisplay","setElementId","cat","_id","name","Chat","Categories","userName","setDisplayAdd","displayAdd","catjson","displayEdit","setDisplayEdit","Messages","sendFile","file","selectedFile","log","setSelectedFile","elements","el","category","sendMessage","authentication","target","files","Center","event","StatusBar","onlineList","length","offlineList","reducer","state","action","initialState","setOnline","setOffline","online","offline","setOnlineList","setOfflineList","setUserName","setCatJson","setAuthentication","element","setElement","setElements","elementId","main","document","getElementById","scrollIntoView","new_offlineList","filter","new_onlineList"],"sources":["/home/giorgir/Desktop/web projects/discord-mern/client/src/components/Chat/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useReducer } from 'react';\r\n\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport FormData from 'form-data';\r\n\r\nimport './_chat.sass';\r\nimport { EditSVG, MicSVGOff, MicSVGOn, CamSVGOff, CamSVGOn, ScreenShareOff, ScreenShareOn } from '../../styles/SVGs/_SVGs';\r\n\r\nimport { appendFile } from './_appendFile';\r\nimport { getBasicData } from '../js/_getBasicData';\r\nimport * as socks from '../js/_socketSide';\r\n\r\n// import { WebRTCFrame } from '../WebRTCInteractive/WebRTCInteractive';\r\nimport { VoiceFrame } from '../Voice/_voice';\r\n\r\nimport { PopupEditCat, PopupAddCat } from './_editCat';\r\n\r\nconst checkRoomId = (roomId, setCategory, history, setVoiceMode) => {\r\n    if (roomId === undefined)\r\n        history.push(\"/chat/61ed960432479c682956802b\");\r\n        // roomId = \"61ed960432479c682956802b\";\r\n\r\n    axios.post(\"/api/roomId\", { id: roomId })\r\n    .then(res => {\r\n        if (res.data.roomName != \"try_again\"){\r\n            setCategory(res.data.roomName);\r\n            if (res.data.voiceMode)\r\n                setVoiceMode(true);\r\n        }\r\n        else{\r\n            history.push(\"/chat/61ed960432479c682956802b\");\r\n            // roomId = \"61ed960432479c682956802b\";\r\n            setCategory(\"room 1\");\r\n            setVoiceMode(false);\r\n        }\r\n    })\r\n    .catch(err => console.error(err));\r\n}\r\n\r\nconst logOut = (e, history) => {\r\n    e.preventDefault();\r\n    axios.post(\"/api/users/logout\", { junk: \"\" })\r\n    .then(res => {\r\n        if (res.data.status === \"done\")\r\n            history.push(\"/\");\r\n    })\r\n    .catch(err => console.error(err));\r\n\r\n    socks.disconnect();\r\n}\r\n\r\nconst newMessage = (user, msg, date) => (\r\n    <div className=\"element\">\r\n        <div className=\"author\">\r\n            {user}\r\n        </div>\r\n        <div className=\"message\">\r\n            {msg.split(\"\\n\").map(line => <div>{line}</div>)}\r\n        </div>\r\n        <div className=\"date\">\r\n           {date}\r\n        </div>\r\n    </div>\r\n)\r\n\r\nconst CategoriesJSX = ({ cats, display, setDisplay, setElementId }) =>\r\n    cats.map(cat => <li className=\"category\" id={cat._id}>\r\n        <a href={`/chat/${cat._id}`}># {cat.name}</a>\r\n        <EditSVG id={cat._id} display={display} setDisplay={setDisplay} setElementId={setElementId} />\r\n    </li>);\r\n\r\nconst Chat = () => {\r\n    const Categories = () => (\r\n        // { user, cats, displayEdit, setDisplayEdit, displayAdd, setDisplayAdd, setElementId}\r\n        <div className=\"categories\">\r\n            <div className=\"top\">\r\n                <div className=\"topbar\">\r\n                    <h1 className=\"user\">{userName}</h1>\r\n                    <h1 className=\"plus\" onClick={() => setDisplayAdd(!displayAdd)}>+</h1>\r\n                </div>\r\n    \r\n                <nav>\r\n                    <ul id=\"ul-id\">\r\n                        <CategoriesJSX cats={catjson} display={displayEdit} setDisplay={setDisplayEdit} setElementId={setElementId} />\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n        </div>\r\n    )\r\n    \r\n    const Messages = () => { // { authentication, room, roomId, elements, user }\r\n        const sendFile = () => {\r\n            // sendFile(e.target.files[0])\r\n            let file = selectedFile;\r\n            console.log(\"shit\", file);\r\n            // const formData = new FormData();\r\n            // formData.append(\"user\", userName);\r\n            // // formData.append(\"time\", \"00:00\");\r\n            // formData.append(\"size\", file.size); // in bites\r\n            // // let fileF = \"\";\r\n            // formData.append(\"file\", selectedFile, file.name);\r\n            // axios.post(\"/upload\", formData)\r\n            //      .then(res => {\r\n            //         console.log(\"Successfully Uploaded...\");\r\n            //      })\r\n            //      .catch(err => alert(err));\r\n        }\r\n\r\n        const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n        useEffect(() => {\r\n            if (selectedFile != null)\r\n                sendFile();\r\n        }, [selectedFile]);\r\n\r\n        return (\r\n        <>\r\n            <div id=\"chat-screen\">\r\n                {elements.map(el => newMessage(el.user, el.msg, el.date))}\r\n                <div id=\"last-element\"></div>\r\n            </div>\r\n            <div id=\"input\">\r\n                <textarea\r\n                    id=\"text-area\"\r\n                    type=\"text\"\r\n                    placeholder={`Message #${category}`}\r\n                    onKeyPress={(e) => socks.sendMessage(e, userName, category, roomId, authentication)}\r\n                ></textarea>\r\n                {/* <svg viewBox=\"0 0 24 24\" onClick={(event) => appendFile(event)}>\r\n                    <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\">\r\n                    </path>\r\n                </svg> */}\r\n                <input type=\"file\" value={selectedFile} onChange={(e) => setSelectedFile(e.target.files[0])}/>\r\n            </div>\r\n        </>\r\n        );\r\n    }\r\n    \r\n    const Center = () => (\r\n        <div className=\"messages\">\r\n            <div id=\"top\">\r\n                <h1 id=\"category\"># {category}</h1>\r\n                <h1 id=\"log_out\" onClick={(event) => {logOut(event, history)}}>Log out</h1>\r\n            </div>\r\n\r\n            {voiceMode\r\n            ? <VoiceFrame history={history} roomId={roomId} userName={userName} />\r\n            : <Messages/>}\r\n        </div>\r\n    )\r\n\r\n    const StatusBar = () => ( // { online, offline }\r\n        <div className=\"status-bar\">\r\n            <h2>ACTIVE - {onlineList.length}</h2>\r\n            {onlineList.map(el => <h2 className=\"online\">--- {el}</h2>)}\r\n            <h2>OFFLINE - {offlineList.length}</h2>\r\n            {offlineList.map(el => <h2 className=\"offline\">--- {el}</h2>)}\r\n        </div>\r\n    )\r\n\r\n    const reducer = (state, action) => {\r\n        // pass\r\n    }\r\n\r\n    const initialState = {\r\n        setOnline: \"\",\r\n        setOffline: \"\",\r\n        onlineList: [],\r\n        offlineList: [],\r\n    };\r\n\r\n    const [online, setOnline] = useState(\"\");\r\n    const [offline, setOffline] = useState(\"\");\r\n    const [onlineList, setOnlineList] = useState([]);\r\n    const [offlineList, setOfflineList] = useState([]);\r\n    \r\n    // const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n    let { roomId } = useParams();\r\n\r\n    const [userName, setUserName] = useState(\"\");\r\n    const [category, setCategory] = useState(\"\");\r\n\r\n    const [catjson, setCatJson] = useState([]);\r\n    const [authentication, setAuthentication] = useState();\r\n\r\n    const [element, setElement] = useState({\r\n        user: \"author\",\r\n        msg: \"message\",\r\n        date: \"date\"});\r\n    const [elements, setElements] = useState([]);\r\n\r\n    const [displayEdit, setDisplayEdit] = useState(false);\r\n    const [displayAdd, setDisplayAdd] = useState(false);\r\n    const [elementId, setElementId] = useState();\r\n\r\n    const [voiceMode, setVoiceMode] = useState(false);\r\n\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        checkRoomId(roomId, setCategory, history, setVoiceMode);\r\n\r\n        getBasicData(history, setUserName, setAuthentication, setCatJson, \"chat\");\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (userName !== \"\")\r\n            socks.main(category, userName, setElement, setOnline, setOffline);\r\n    }, [userName]);\r\n\r\n    useEffect(() => {\r\n        setElements([...elements, element]);\r\n    }, [element]);\r\n\r\n    useEffect(() => {\r\n        let el = document.getElementById(\"last-element\");\r\n        el.scrollIntoView();\r\n    }, [elements]);\r\n\r\n    useEffect(() => {\r\n        if (online !== \"\"){\r\n            let new_offlineList = offlineList.filter(element => element !== online)\r\n            setOfflineList(new_offlineList);\r\n            setOnlineList([...onlineList, online]);\r\n        }\r\n    }, [online]);\r\n\r\n    useEffect(() => {\r\n        if (offline !== \"\"){\r\n            let new_onlineList = onlineList.filter(element => element !== offline)\r\n            setOnlineList(new_onlineList);\r\n            setOfflineList([...offlineList, offline]);\r\n        }\r\n    }, [offline]);\r\n\r\n    return (\r\n        <div className=\"chat\">\r\n            { displayEdit ?\r\n            <PopupEditCat\r\n                setDisplay={setDisplayEdit}\r\n                catjson={catjson}\r\n                setCatJson={setCatJson}\r\n                elementId={elementId}\r\n            /> : null\r\n            }\r\n            { displayAdd ?\r\n            <PopupAddCat\r\n                setDisplay={setDisplayAdd}\r\n                catjson={catjson}\r\n                setCatJson={setCatJson}\r\n            /> : null\r\n            }\r\n\r\n            <Categories/>\r\n            <Center/>\r\n            <StatusBar/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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"},"metadata":{},"sourceType":"module"}