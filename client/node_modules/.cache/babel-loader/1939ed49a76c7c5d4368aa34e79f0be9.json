{"ast":null,"code":"import _slicedToArray from\"/home/giorgir/Desktop/web projects/discord-mern/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';// { Link, Redirect }\nimport axios from'axios';import{getBasicData}from'../js/_getBasicData';import'./_login.sass';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var sendLoginData=function sendLoginData(e,user,pswrd,history){e.preventDefault();var data={username:user,password:pswrd};axios.post(\"/api/users/login\",data).then(function(res){if(res.data.data===\"done\"){history.push(\"/chat\");// /?id=${res.data.data}\n}else{alert(\"Try again...\");}}).catch(function(err){return console.error('fcking error...',err);});};var Login=function Login(){document.title=\"login section\";var _useState=useState(),_useState2=_slicedToArray(_useState,2),userName=_useState2[0],setUserName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var history=useHistory();var queryParams=new URLSearchParams(window.location.search);// console.log(queryParams.get('status')===null);\nuseEffect(function(){if(queryParams.get('status')===\"done\"){// successfully registered\nalert(\"registration is done...\");}getBasicData(history);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Login\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"username\",children:\"UserName:\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"e-name\",rows:\"1\",cols:\"20\",onChange:function onChange(event){return setUserName(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"e-pass\",rows:\"1\",cols:\"20\",onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(event){return sendLoginData(event,userName,password,history);},children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"go-button\",children:\"GO\"})}),/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",className:\"sign-up-button\",children:\"Sign up\"})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useHistory","axios","getBasicData","sendLoginData","e","user","pswrd","history","preventDefault","data","username","password","post","then","res","push","alert","catch","err","console","error","Login","document","title","userName","setUserName","setPassword","queryParams","URLSearchParams","window","location","search","get","event","target","value"],"sources":["/home/giorgir/Desktop/web projects/discord-mern/client/src/components/Login/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom'; // { Link, Redirect }\r\nimport axios from 'axios';\r\n\r\nimport { getBasicData } from '../js/_getBasicData';\r\n\r\nimport './_login.sass';\r\n\r\nconst sendLoginData = (e, user, pswrd, history) => {\r\n    e.preventDefault();\r\n    let data = {\r\n        username: user,\r\n        password: pswrd\r\n    };\r\n\r\n    axios.post(\"/api/users/login\", data)\r\n    .then(res => {\r\n        if (res.data.data === \"done\") {\r\n            history.push(`/chat`); // /?id=${res.data.data}\r\n        }\r\n        else {\r\n            alert(\"Try again...\");\r\n        }\r\n    })\r\n    .catch(err => console.error('fcking error...', err));\r\n};\r\n\r\nconst Login = () => {\r\n    document.title = \"login section\";\r\n\r\n    const [userName, setUserName] = useState();\r\n    const [password, setPassword] = useState();\r\n    const history = useHistory();\r\n\r\n    const queryParams = new URLSearchParams(window.location.search);\r\n    // console.log(queryParams.get('status')===null);\r\n    useEffect(() => {\r\n        if (queryParams.get('status') === \"done\"){ // successfully registered\r\n            alert(\"registration is done...\");\r\n        }\r\n\r\n        getBasicData(history);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"login\">\r\n            <h2 className=\"title\">Login</h2>\r\n            <h2 className=\"username\">UserName:</h2>\r\n            <h2 className=\"password\">Password:</h2>\r\n\r\n            <input type=\"text\" className=\"e-name\" rows=\"1\" cols=\"20\" onChange={(event) => setUserName(event.target.value)} />\r\n            <input type=\"password\" className=\"e-pass\" rows=\"1\" cols=\"20\" onChange={(event) => setPassword(event.target.value)} />\r\n\r\n            <form onSubmit={(event) => sendLoginData(event, userName, password, history)}>\r\n                <button type=\"submit\" className=\"go-button\">\r\n                    GO\r\n                </button>\r\n            </form>\r\n\r\n            <a href=\"/signup\" className=\"sign-up-button\">Sign up</a>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"],"mappings":"4IAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAA+C;AAC/C,MAAOC,MAAP,KAAkB,OAAlB,CAEA,OAASC,YAAT,KAA6B,qBAA7B,CAEA,MAAO,eAAP,C,wFAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,CAAD,CAAIC,IAAJ,CAAUC,KAAV,CAAiBC,OAAjB,CAA6B,CAC/CH,CAAC,CAACI,cAAF,GACA,GAAIC,KAAI,CAAG,CACPC,QAAQ,CAAEL,IADH,CAEPM,QAAQ,CAAEL,KAFH,CAAX,CAKAL,KAAK,CAACW,IAAN,CAAW,kBAAX,CAA+BH,IAA/B,EACCI,IADD,CACM,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACL,IAAJ,CAASA,IAAT,GAAkB,MAAtB,CAA8B,CAC1BF,OAAO,CAACQ,IAAR,UAAuB;AAC1B,CAFD,IAGK,CACDC,KAAK,CAAC,cAAD,CAAL,CACH,CACJ,CARD,EASCC,KATD,CASO,SAAAC,GAAG,QAAIC,QAAO,CAACC,KAAR,CAAc,iBAAd,CAAiCF,GAAjC,CAAJ,EATV,EAUH,CAjBD,CAmBA,GAAMG,MAAK,CAAG,QAARA,MAAQ,EAAM,CAChBC,QAAQ,CAACC,KAAT,CAAiB,eAAjB,CAEA,cAAgCzB,QAAQ,EAAxC,wCAAO0B,QAAP,eAAiBC,WAAjB,eACA,eAAgC3B,QAAQ,EAAxC,yCAAOa,QAAP,eAAiBe,WAAjB,eACA,GAAMnB,QAAO,CAAGP,UAAU,EAA1B,CAEA,GAAM2B,YAAW,CAAG,GAAIC,gBAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CAApB,CACA;AACAhC,SAAS,CAAC,UAAM,CACZ,GAAI4B,WAAW,CAACK,GAAZ,CAAgB,QAAhB,IAA8B,MAAlC,CAAyC,CAAE;AACvChB,KAAK,CAAC,yBAAD,CAAL,CACH,CAEDd,YAAY,CAACK,OAAD,CAAZ,CACH,CANQ,CAMN,EANM,CAAT,CAQA,mBACI,aAAK,SAAS,CAAC,OAAf,wBACI,WAAI,SAAS,CAAC,OAAd,mBADJ,cAEI,WAAI,SAAS,CAAC,UAAd,uBAFJ,cAGI,WAAI,SAAS,CAAC,UAAd,uBAHJ,cAKI,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,QAA7B,CAAsC,IAAI,CAAC,GAA3C,CAA+C,IAAI,CAAC,IAApD,CAAyD,QAAQ,CAAE,kBAAC0B,KAAD,QAAWR,YAAW,CAACQ,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAtB,EAAnE,EALJ,cAMI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,QAAjC,CAA0C,IAAI,CAAC,GAA/C,CAAmD,IAAI,CAAC,IAAxD,CAA6D,QAAQ,CAAE,kBAACF,KAAD,QAAWP,YAAW,CAACO,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAtB,EAAvE,EANJ,cAQI,aAAM,QAAQ,CAAE,kBAACF,KAAD,QAAW9B,cAAa,CAAC8B,KAAD,CAAQT,QAAR,CAAkBb,QAAlB,CAA4BJ,OAA5B,CAAxB,EAAhB,uBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,WAAhC,gBADJ,EARJ,cAcI,UAAG,IAAI,CAAC,SAAR,CAAkB,SAAS,CAAC,gBAA5B,qBAdJ,GADJ,CAkBH,CAnCD,CAqCA,cAAec,MAAf"},"metadata":{},"sourceType":"module"}